{% extends 'base.html' %}

{% load polls %}
{% load staticfiles %}

{% block additional_static %}
    <script src="{% static 'script.js' %}"></script>
    <script src="{% static 'jquery.cookie.js' %}"></script>
{% endblock %}

{% block content %}
    <h2 data-pk="{{ poll.pk }}" id="poll" data-finish_url="{% url 'finish_poll' poll.pk %}">{{ poll.name }}</h2>
        <br>
        {% for question in instances %}
            {% answered question as user_answered %}
                <h4 class="active">{{ question.text }}</h4>
                <br>
                <div class="question">
                    <select data-question="{{ question.pk }}" class="form-control question-root"{% if user_answered %}
                                disabled
                            {% endif %}
                            {% if  question.is_multiple %}multiple{% endif %}
                    >
                        {% for answer in question.answers.all %}
                            <option value="{{ answer.pk }}">{{ answer.text }}</option>
                        {% endfor %}
                    </select><br>
                    {% if not user_answered %}
                        <button type="button" class="btn btn-primary answer">Ответить</button>
                    {% endif %}
                </div>
            <br>
        {% endfor %}
    <br><br>
    {% include "rambler/parts/paginator.html" with instances=instances %}
    <br>
    {% if not instances.has_next %}
        <a href="#" class="btn btn-danger finish-poll" role="button">Завершить опрос</a>
    {% endif %}
{% endblock %}